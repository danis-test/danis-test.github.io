{"version":3,"sources":["components/PopupAddItem.jsx","pages/GroupList.jsx","pages/StudentsList.jsx","components/Header.jsx","components/ButtonAddItem.jsx","App.js","index.js"],"names":["PopupAddItem","updateStateStudents","updateStateGroup","useState","visible","setVisible","pageStudents","setPageStudents","popupRef","useRef","studentRef","groupRef","useEffect","document","querySelector","classList","add","addEventListener","toggleVisiblePopup","body","handleOutsideClick","clearUseEffect","contains","removeEventListener","event","path","composedPath","includes","current","ref","className","classNames","type","placeholder","onClick","preventDefault","idGroup","idStudent","student","value","group","alert","groups","JSON","parse","localStorage","getItem","length","forEach","el","undefined","setItem","stringify","students","GroupList","deleteItem","setGroups","map","data-id","StudentsList","setStudents","studentsForNode","filter","groupName","Math","random","Header","target","querySelectorAll","item","remove","to","ButtonAddItem","App","key","newItems","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.83921dd3.chunk.js","sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\r\nimport classNames from 'classnames'\r\n\r\nconst PopupAddItem = ({updateStateStudents = ()=>{}, updateStateGroup = ()=>{}}) => {\r\n\r\n  const [visible, setVisible] = useState(false)\r\n  const [pageStudents, setPageStudents] = useState(false)\r\n\r\n  const popupRef = useRef()\r\n  const studentRef = useRef()\r\n  const groupRef = useRef()\r\n\r\n  useEffect(() => {\r\n\r\n    // добавить класс header__item--active при загрузке страницы\r\n    if (document.querySelector('.group-list')) {\r\n      document.querySelector('.header__item--group-list').classList.add('header__item--active')\r\n    }\r\n    if (document.querySelector('.students-list')) {\r\n      document.querySelector('.header__item--students-list').classList.add('header__item--active')\r\n    }\r\n\r\n    // открыть попап при клике на кнопку \"Добавить\"\r\n    document.querySelector('.button-add-item').addEventListener('click', toggleVisiblePopup)\r\n    // скрыть папап при клике вне его\r\n    document.body.addEventListener('click', handleOutsideClick)\r\n\r\n    return clearUseEffect\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // проверка страницы для добавляения input для списка студентов\r\n    if (document.querySelector('.header__item--active').classList.contains('header__item--students-list')) {\r\n      setPageStudents(true)\r\n    }\r\n  })\r\n  \r\n  // очистка событий\r\n  const clearUseEffect = () => {\r\n    document.querySelector('.button-add-item').removeEventListener('click', toggleVisiblePopup)\r\n    document.body.removeEventListener('click', handleOutsideClick)\r\n  }\r\n\r\n  // показать/скрыть попап\r\n  let toggleVisiblePopup = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  // скрыть папап при клике вне его\r\n  const handleOutsideClick = (event) => {\r\n    const path = event.path || (event.composedPath && event.composedPath())\r\n    if (!path.includes(popupRef.current) && !path.includes(document.querySelector('.button-add-item'))) {\r\n      setVisible(false)\r\n    }\r\n  }\r\n\r\n\r\n  // добавить пункт в список\r\n  const addItem = (event) => {\r\n    event.preventDefault()\r\n    const student = studentRef.current ? studentRef.current.value : null\r\n    const group = groupRef.current.value\r\n    let idGroup\r\n    let idStudent\r\n\r\n    if ((!student && student !== null) || !group) {\r\n      return alert('Введите данные')\r\n    }\r\n\r\n    let groups = JSON.parse(localStorage.getItem('groups'))\r\n\r\n    if (groups !== null && groups.length) {\r\n      groups.forEach(el => {\r\n        if (el['name'] === group) {\r\n          idGroup = el['id']\r\n        }\r\n      })\r\n      if (idGroup === undefined) {\r\n        idGroup = groups[groups.length-1]['id'] + 1\r\n        groups = [\r\n          ...groups,\r\n          {'id': idGroup, 'name': group}\r\n        ]\r\n      }\r\n    } else {\r\n      idGroup = 0\r\n      groups = [\r\n        {'id': idGroup, 'name': group}\r\n      ]\r\n    }\r\n\r\n    localStorage.setItem('groups', JSON.stringify(groups))\r\n\r\n    if (student !== null) {\r\n      let students = JSON.parse(localStorage.getItem('students'))\r\n      if (students != null && students.length) {\r\n        idStudent = students[students.length-1]['id'] + 1\r\n        students = [\r\n          ...students,\r\n          {'id': idStudent, 'name': student, 'id_group': idGroup}\r\n        ]\r\n      } else {\r\n        students = [\r\n          {'id': 0, 'name': student, 'id_group': idGroup}\r\n        ]\r\n      }\r\n\r\n      localStorage.setItem('students', JSON.stringify(students))\r\n    }\r\n    updateStateStudents()\r\n    updateStateGroup()\r\n    toggleVisiblePopup()\r\n    studentRef.current && (studentRef.current.value = '')\r\n    groupRef.current.value = ''\r\n  }\r\n  \r\n  \r\n\r\n  return (\r\n    <form ref={popupRef} className={classNames('popup-addItem', {\r\n      'popup-addItem--active': visible\r\n    })}>\r\n      {pageStudents && <input ref={studentRef} type=\"text\" placeholder=\"Введите имя студента\" className=\"popup-addItem__input\"/>}\r\n      <input ref={groupRef} type=\"text\" placeholder=\"Введите название группы\" className=\"popup-addItem__input\"/>\r\n      <div className=\"popup-addItem__button-wrapper\">\r\n        <button className=\"popup-addItem__button popup-addItem__button--ok\" onClick={addItem}>Добавить</button>\r\n        <div className=\"popup-addItem__button popup-addItem__button--cancel\" onClick={toggleVisiblePopup}>Отменить</div>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PopupAddItem","import React, {useState} from 'react'\r\nimport PopupAddItem from '../components/PopupAddItem'\r\n\r\nconst GroupList = ({deleteItem}) => {\r\n\r\n  let [groups, setGroups] = useState(JSON.parse(localStorage.getItem('groups')))\r\n  \r\n  if (!groups) groups = []\r\n\r\n  const updateStateGroup = () => {\r\n    setGroups(JSON.parse(localStorage.getItem('groups')))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PopupAddItem updateStateGroup={updateStateGroup} />\r\n      <ul className=\"group-list\">\r\n        {groups.map(group => {\r\n          return <li className=\"group-item item\" data-id={group['id']} key={group['id']}>\r\n            <span className=\"item__name\">{group['name']}</span>\r\n            <span className=\"item__delete\" onClick={() => {deleteItem('groups', group['id']); updateStateGroup()}}>Удалить</span>\r\n          </li>\r\n        })}\r\n      </ul>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default GroupList","import React, {useState} from 'react'\r\nimport PopupAddItem from '../components/PopupAddItem'\r\n\r\nconst StudentsList = ({deleteItem}) => {\r\n  let [students, setStudents] = useState(JSON.parse(localStorage.getItem('students')))\r\n  let [groups, setGroups] = useState(JSON.parse(localStorage.getItem('groups')))\r\n\r\n  const updateStateStudents = () => {\r\n    setStudents(JSON.parse(localStorage.getItem('students')))\r\n    setGroups(JSON.parse(localStorage.getItem('groups')))\r\n  }\r\n\r\n  if (!students) students = []\r\n  if (!groups) groups = []\r\n\r\n  const studentsForNode = students.map(student => {\r\n    const group = groups.filter(group => student['id_group'] === group['id'])\r\n    const groupName = (group.length && group[0]['name']) || 'Без группы'\r\n    return {\r\n      'id': student['id'],\r\n      'name': `${student['name']} - ${groupName}`\r\n    }\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <PopupAddItem updateStateStudents={updateStateStudents} />\r\n      <ul className=\"students-list\">\r\n        {studentsForNode.map(el => (\r\n          <li className=\"students-item item\" data-id={el['id']} key={el + Math.random()}>\r\n            <span className=\"item__name\">{el['name']}</span>\r\n            <span className=\"item__delete\" onClick={() => {deleteItem('students', el['id']); updateStateStudents()}}>Удалить</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default StudentsList","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Header = () => {\r\n\r\n  // переключатель кнопок header\r\n  const toggleHeaderItem = (event) => {\r\n    if (event.target.classList.contains('header__item') &&\r\n    !event.target.classList.contains('header__item--active')) {\r\n      const headerItems = document.querySelectorAll('.header__item')\r\n      headerItems.forEach(item => {\r\n        item.classList.remove('header__item--active')        \r\n      })\r\n      event.target.classList.add('header__item--active')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <header className=\"header\" onClick={toggleHeaderItem}>\r\n      <Link className=\"header__item header__item--group-list\" to=\"/\">\r\n        Список групп\r\n      </Link>\r\n      <Link className=\"header__item header__item--students-list\" to=\"/students-list\">\r\n        Список студентов\r\n      </Link>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from 'react'\r\n\r\nconst ButtonAddItem = () => {\r\n  return (\r\n    <div className=\"button-add-item\">Добавить</div>\r\n  )\r\n}\r\n\r\nexport default ButtonAddItem","import React from 'react'\nimport { Route } from 'react-router-dom'\nimport GroupList from './pages/GroupList'\nimport StudentsList from './pages/StudentsList'\nimport Header from './components/Header'\nimport ButtonAddItem from './components/ButtonAddItem'\n\nfunction App() {\n\n  // удалить пункт списка\n  const deleteItem = (key, value) => {\n    const items = JSON.parse(localStorage.getItem(key))\n    const newItems = items.filter(item => item['id'] !== value)\n    localStorage.setItem(key, JSON.stringify(newItems))\n  }\n  \n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <Header />\n        <ButtonAddItem />\n        <div className=\"content\">\n          <Route path=\"/\" exact>\n            <GroupList deleteItem={deleteItem} />\n          </Route>\n          <Route path=\"/students-list\" exact>\n            <StudentsList deleteItem={deleteItem} />\n          </Route>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './scss/index.scss'\nimport App from './App'\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}